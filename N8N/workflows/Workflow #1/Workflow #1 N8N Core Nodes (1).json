{
  "name": "Workflow #1 N8N Core Nodes",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        384,
        4928
      ],
      "id": "d6878d1c-b6ab-4d90-93a2-495c4f4a2751",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "seconds",
              "secondsInterval": 5
            }
          ]
        }
      },
      "id": "084d4967-cc50-4049-906f-9e5008a6fdd1",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        384,
        4736
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "userApiUrl",
              "value": "https://jsonplaceholder.typicode.com/users",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "productApiUrl",
              "value": "https://api.escuelajs.co/api/v1/products",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "priceThreshold",
              "value": 10,
              "type": "number"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "id": "8fdd6e61-e2df-4b90-a46f-90529560159e",
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        608,
        4928
      ],
      "retryOnFail": false
    },
    {
      "parameters": {
        "path": "example-1",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        384,
        5120
      ],
      "id": "a4d136fb-bd7c-4124-b30d-cd98fc2165ef",
      "name": "Webhook",
      "webhookId": "b0bdeb17-585c-4a64-be8e-5b25bdf5148d"
    },
    {
      "parameters": {
        "operation": "xls",
        "binaryPropertyName": "file",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        1504,
        4928
      ],
      "id": "110f82d6-fe8e-4e29-9bfd-dfb3d04be8f0",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "jsCode": "// $input.all() returns all input items\n// Each item has .json containing your data\n\nconst allItems = $input.all();\n\n// For example, if input1 (users) comes from the first node\n// and input2 (products) comes from the second node,\n// you need to get them like this:\n\nconst users = allItems[0].json.users;      // adjust path based on your actual data\nconst products = allItems[1].json.products; // adjust path based on your actual data\n\n// Safety check\nif (!users || !products) {\n  throw new Error(\"Users or Products array not found. Check your input paths!\");\n}\n\n// Find the smaller length\nconst length = Math.min(users.length, products.length);\n\n// Merge by index\nconst merged = [];\nfor (let i = 0; i < length; i++) {\n  merged.push({\n    json: {\n      id: i + 1,\n      userName: users[i].userName,\n      email: users[i].email,\n      city: users[i].address,\n      productName: products[i].productName,\n      imageUrl: products[i].imageUrl,\n      category: products[i].category,\n      price: products[i].price,\n    }\n  });\n}\n\nreturn merged;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1280,
        4928
      ],
      "id": "066a4db6-1b0a-4c7b-963c-9b2f8291cbc5",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "respondWith": "binary",
        "responseDataSource": "set",
        "inputFieldName": "file",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        1728,
        4928
      ],
      "id": "c5887cd3-2941-40a2-8479-9547dd5c119a",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {},
      "id": "9f4e1146-fae5-40c7-82f7-51b7ab96926e",
      "name": "Combine User and Product Data",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1056,
        4928
      ]
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "dBiFC2dgmNieLTOK",
          "mode": "list",
          "cachedResultUrl": "/workflow/dBiFC2dgmNieLTOK",
          "cachedResultName": "User Workflow"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        832,
        4832
      ],
      "id": "66fd89f7-ad01-4478-8ecb-db0f8d7b31c0",
      "name": "Execute User Workflow"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "LpOZz6a31AYgeSUe",
          "mode": "list",
          "cachedResultUrl": "/workflow/LpOZz6a31AYgeSUe",
          "cachedResultName": "Product Workflow"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        832,
        5024
      ],
      "id": "674b7ed1-ca0a-4c34-a638-2277dee4255b",
      "name": "Execute Product Workflow"
    },
    {
      "parameters": {
        "content": "ðŸ“‹ WORKFLOW SUMMARY\n\nðŸŽ¯ Purpose:\nOrchestrator workflow that combines user and product data from two sub-workflows and exports the merged result as an Excel file.\n\nâš™ï¸ Trigger Options:\nâ€¢ Manual Trigger - Execute on demand via UI\nâ€¢ Schedule Trigger - Runs every 5 seconds automatically\nâ€¢ Webhook - HTTP GET endpoint at /example-1\n\nðŸ”„ Workflow Flow:\n1. Workflow Configuration - Centralizes API URLs and price threshold (10)\n2. Execute User Workflow - Calls sub-workflow to fetch and clean user data\n3. Execute Product Workflow - Calls sub-workflow to fetch and clean product data\n4. Combine User and Product Data - Merges both datasets using Merge node\n5. Code in JavaScript - Custom logic to merge users and products by index\n6. Convert to File - Transforms merged data into Excel (.xls) format\n7. Respond to Webhook - Returns the Excel file to the webhook caller\n\nðŸ“Š Data Sources:\nâ€¢ Users: https://jsonplaceholder.typicode.com/users\nâ€¢ Products: https://api.escuelajs.co/api/v1/products\n\nðŸ”— Sub-Workflows:\nâ€¢ User Workflow (ID: dBiFC2dgmNieLTOK)\nâ€¢ Product Workflow (ID: LpOZz6a31AYgeSUe)\n\nðŸ“¤ Output:\nExcel file containing merged user-product data with fields:\n- id, userName, email, city, productName, imageUrl, category, price\n\nðŸ’¡ Key Features:\nâ€¢ Modular design using Execute Workflow nodes\nâ€¢ Centralized configuration management\nâ€¢ Multiple trigger options for flexibility\nâ€¢ Custom JavaScript merging logic\nâ€¢ Webhook response with binary file output",
        "height": 792,
        "width": 736
      },
      "id": "d5f2a049-ac1d-4ecb-94f9-7a8ba43841ed",
      "name": "Workflow Summary Notes",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        256,
        3904
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Workflow Configuration": {
      "main": [
        [
          {
            "node": "Execute User Workflow",
            "type": "main",
            "index": 0
          },
          {
            "node": "Execute Product Workflow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combine User and Product Data": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Product Workflow": {
      "main": [
        [
          {
            "node": "Combine User and Product Data",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Execute User Workflow": {
      "main": [
        [
          {
            "node": "Combine User and Product Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "7d93b43e-8e2e-4d34-9d84-e9e89f2621d0",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "400eb0047eabc1e61813fea88eaf20841c86c6c6abe77bcf3a9e339855b94c89"
  },
  "id": "LOjPqTYk1CeJoU2o",
  "tags": [
    {
      "updatedAt": "2025-11-17T03:51:31.780Z",
      "createdAt": "2025-11-17T03:51:31.780Z",
      "id": "Nmiqy4s8MNoYwvba",
      "name": "Workflow #1"
    }
  ]
}